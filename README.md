# File Agent

ä¸€ä¸ªé›†æˆäº†æ–‡ä»¶ç®¡ç†å’ŒAIèƒ½åŠ›çš„æ™ºèƒ½ä»£ç†ï¼Œæ”¯æŒä¸»æµå¤§æ¨¡å‹APIã€‚è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„AIæ–‡ä»¶ç®¡ç†åŠ©æ‰‹ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- ğŸ—‚ï¸ **æ™ºèƒ½æ–‡ä»¶ç®¡ç†**: æ”¯æŒæ–‡ä»¶çš„åˆ›å»ºã€è¯»å–ã€å†™å…¥ã€åˆ é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ç­‰æ“ä½œ
- ğŸ¤– **å¤šAIæä¾›å•†é›†æˆ**: æ”¯æŒOpenAIã€Claudeã€Geminiã€DeepSeekç­‰ä¸»æµå¤§æ¨¡å‹API
- ğŸ’¬ **è‡ªç„¶è¯­è¨€äº¤äº’**: é€šè¿‡ä¸­æ–‡è‡ªç„¶è¯­è¨€ä¸AIäº¤äº’ï¼Œæ‰§è¡Œæ–‡ä»¶æ“ä½œ
- âš™ï¸ **çµæ´»é…ç½®ç®¡ç†**: æ”¯æŒYAMLé…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡é…ç½®
- ğŸ”’ **å®‰å…¨æ–‡ä»¶æ“ä½œ**: è‡ªåŠ¨å¤‡ä»½ã€è·¯å¾„éªŒè¯ã€é”™è¯¯å¤„ç†
- ğŸ“ **å®Œæ•´æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è¿½è¸ª
- ğŸ§ª **å®Œå–„æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡
- ğŸ¯ **å‘½ä»¤è¡Œç•Œé¢**: æ”¯æŒäº¤äº’å¼å’Œå•å‘½ä»¤æ¨¡å¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è‡ªåŠ¨å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd file-agent

# è¿è¡Œå®‰è£…è„šæœ¬
python install.py
```

### æ‰‹åŠ¨å®‰è£…

1. **å®‰è£…ä¾èµ–**ï¼š
```bash
pip install -r requirements.txt
```

2. **å®‰è£…åŒ…**ï¼š
```bash
pip install -e .
```

3. **é…ç½®APIå¯†é’¥**ï¼š
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIå¯†é’¥
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œç•Œé¢

#### äº¤äº’å¼æ¨¡å¼
```bash
file-agent
```

#### å•å‘½ä»¤æ¨¡å¼
```bash
# åˆ›å»ºæ–‡ä»¶
file-agent -c "åˆ›å»ºä¸€ä¸ªåä¸º\"hello.txt\"çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯\"Hello World\""

# è¯»å–æ–‡ä»¶
file-agent -c "è¯»å–æ–‡ä»¶\"hello.txt\""

# åˆ—å‡ºæ–‡ä»¶
file-agent -c "åˆ—å‡ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶"

# æŒ‡å®šå·¥ä½œç›®å½•
file-agent --workspace ./my-workspace -c "åˆ›å»ºæ–‡ä»¶\"test.txt\""
```

#### å‘½ä»¤è¡Œé€‰é¡¹
```bash
file-agent --help

Options:
  -c, --command TEXT    æ‰§è¡Œå•ä¸ªå‘½ä»¤
  -w, --workspace TEXT  æŒ‡å®šå·¥ä½œç›®å½•
  -f, --config TEXT     æŒ‡å®šé…ç½®æ–‡ä»¶
  -p, --provider TEXT   æŒ‡å®šAIæä¾›å•† (openai, anthropic, google, deepseek)
  -m, --model TEXT      æŒ‡å®šAIæ¨¡å‹
  -v, --verbose         è¯¦ç»†è¾“å‡º
```

### Python API

```python
import asyncio
from file_agent import FileAgent

async def main():
    # åˆ›å»ºagentå®ä¾‹
    agent = FileAgent()

    # æ‰§è¡Œæ–‡ä»¶æ“ä½œ
    result = await agent.execute("åˆ›å»ºä¸€ä¸ªåä¸º\"demo.txt\"çš„æ–‡ä»¶")
    print(f"ç»“æœ: {result['message']}")

    # è¯»å–æ–‡ä»¶
    result = await agent.execute("è¯»å–æ–‡ä»¶\"demo.txt\"")
    if result['success']:
        print(f"å†…å®¹: {result['content']}")

    # AIå¯¹è¯
    result = await agent.execute("è¯·å¸®æˆ‘åˆ†æå½“å‰ç›®å½•çš„æ–‡ä»¶ç»“æ„")
    print(f"AIå›å¤: {result['message']}")

# è¿è¡Œ
asyncio.run(main())
```

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```bash
# AI APIå¯†é’¥
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here
GOOGLE_API_KEY=your_google_api_key_here
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# é»˜è®¤è®¾ç½®
DEFAULT_AI_PROVIDER=openai
DEFAULT_MODEL=gpt-3.5-turbo
DEFAULT_WORKSPACE=./workspace

# æ–‡ä»¶ç®¡ç†è®¾ç½®
MAX_FILE_SIZE_MB=10
BACKUP_ENABLED=true
BACKUP_DIR=./backups

# æ—¥å¿—è®¾ç½®
LOG_LEVEL=INFO
LOG_FILE=./logs/agent.log
```

### YAMLé…ç½®æ–‡ä»¶

åˆ›å»º `config.yaml`ï¼š

```yaml
ai:
  default_provider: openai  # å¯é€‰: openai, anthropic, google, deepseek
  default_model: gpt-3.5-turbo
  max_tokens: 1000
  temperature: 0.7

file_manager:
  default_workspace: ./workspace
  max_file_size_mb: 10
  backup_enabled: true
  backup_dir: ./backups

logging:
  level: INFO
  file: ./logs/agent.log
```

## ğŸ¯ æ”¯æŒçš„å‘½ä»¤

### æ–‡ä»¶æ“ä½œå‘½ä»¤

| å‘½ä»¤ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| åˆ›å»ºæ–‡ä»¶ | `åˆ›å»ºä¸€ä¸ªåä¸º"test.txt"çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯"Hello"` | åˆ›å»ºæ–°æ–‡ä»¶ |
| è¯»å–æ–‡ä»¶ | `è¯»å–æ–‡ä»¶"test.txt"` | è¯»å–æ–‡ä»¶å†…å®¹ |
| åˆ é™¤æ–‡ä»¶ | `åˆ é™¤æ–‡ä»¶"test.txt"` | åˆ é™¤æ–‡ä»¶ï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰ |
| å¤åˆ¶æ–‡ä»¶ | `å°†"test.txt"å¤åˆ¶ä¸º"backup.txt"` | å¤åˆ¶æ–‡ä»¶ |
| åˆ›å»ºç›®å½• | `åˆ›å»ºä¸€ä¸ªåä¸º"docs"çš„ç›®å½•` | åˆ›å»ºç›®å½• |
| åˆ—å‡ºæ–‡ä»¶ | `åˆ—å‡ºå½“å‰ç›®å½•çš„æ–‡ä»¶` | åˆ—å‡ºæ–‡ä»¶å’Œç›®å½• |

### ç³»ç»Ÿå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `status` | æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ |
| `config` | æ˜¾ç¤ºé…ç½®ä¿¡æ¯ |
| `exit` | é€€å‡ºç¨‹åº |

### AIå¯¹è¯

ä»»ä½•ä¸åŒ¹é…æ–‡ä»¶æ“ä½œçš„è¾“å…¥éƒ½ä¼šå‘é€ç»™AIåŠ©æ‰‹å¤„ç†ï¼Œä¾‹å¦‚ï¼š
- "è¯·å¸®æˆ‘åˆ†æè¿™ä¸ªé¡¹ç›®çš„ç»“æ„"
- "å¦‚ä½•ä¼˜åŒ–æˆ‘çš„ä»£ç ï¼Ÿ"
- "è§£é‡Šä¸€ä¸‹è¿™ä¸ªé”™è¯¯ä¿¡æ¯"

### DeepSeekç‰¹åˆ«è¯´æ˜

DeepSeekæ˜¯ä¸€ä¸ªä¼˜ç§€çš„ä¸­æ–‡AIæ¨¡å‹ï¼Œç‰¹åˆ«é€‚åˆï¼š
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡å¯¹è¯**: ä¼˜ç§€çš„ä¸­æ–‡ç†è§£å’Œç”Ÿæˆèƒ½åŠ›
- ğŸ’» **ä»£ç ç”Ÿæˆ**: å¼ºå¤§çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€
- ğŸ” **ä»£ç å®¡æŸ¥**: ä¸“ä¸šçš„ä»£ç è´¨é‡åˆ†æ
- ğŸ“š **æŠ€æœ¯æ–‡æ¡£**: é«˜è´¨é‡çš„æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ

è·å–DeepSeek APIå¯†é’¥: https://platform.deepseek.com/

ä½¿ç”¨DeepSeekçš„ç¤ºä¾‹ï¼š
```bash
# è®¾ç½®DeepSeekä¸ºé»˜è®¤æä¾›å•†
file-agent -p deepseek -c "è¯·å¸®æˆ‘å†™ä¸€ä¸ªPythonæ’åºç®—æ³•"

# è¿è¡ŒDeepSeekä¸“é—¨æ¼”ç¤º
python examples/deepseek_demo.py
```

## ğŸ§ª å¼€å‘å’Œæµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_file_manager.py -v

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¦†ç›–ç‡
pytest --cov=file_agent
```

### ä»£ç è´¨é‡

```bash
# ä»£ç æ ¼å¼åŒ–
black file_agent tests

# ä»£ç æ£€æŸ¥
flake8 file_agent tests

# ç±»å‹æ£€æŸ¥
mypy file_agent
```

### é¡¹ç›®ç»“æ„

```
file-agent/
â”œâ”€â”€ file_agent/           # ä¸»è¦ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py         # ä¸»ä»£ç†ç±»
â”‚   â”œâ”€â”€ file_manager.py  # æ–‡ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ai_providers.py  # AIæä¾›å•†é›†æˆ
â”‚   â”œâ”€â”€ config.py        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ cli.py           # å‘½ä»¤è¡Œç•Œé¢
â”œâ”€â”€ tests/               # æµ‹è¯•ä»£ç 
â”œâ”€â”€ examples/            # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ workspace/           # é»˜è®¤å·¥ä½œç›®å½•
â”œâ”€â”€ backups/            # å¤‡ä»½ç›®å½•
â”œâ”€â”€ logs/               # æ—¥å¿—ç›®å½•
â”œâ”€â”€ config.yaml         # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

## ğŸ“š å­¦ä¹ è¦ç‚¹

è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ä»¥ä¸‹æŠ€æœ¯å’Œæ¦‚å¿µï¼š

1. **å¼‚æ­¥ç¼–ç¨‹**: ä½¿ç”¨ `asyncio` å¤„ç†AI APIè°ƒç”¨
2. **è®¾è®¡æ¨¡å¼**: å·¥å‚æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼çš„åº”ç”¨
3. **é…ç½®ç®¡ç†**: å¤šå±‚æ¬¡é…ç½®ç³»ç»Ÿè®¾è®¡
4. **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
5. **æµ‹è¯•é©±åŠ¨å¼€å‘**: å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
6. **å‘½ä»¤è¡Œå·¥å…·**: ä½¿ç”¨ `click` æ„å»ºCLI
7. **è‡ªç„¶è¯­è¨€å¤„ç†**: ç®€å•çš„å‘½ä»¤è§£æé€»è¾‘
8. **æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**: å®‰å…¨çš„æ–‡ä»¶æ“ä½œå®è·µ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
